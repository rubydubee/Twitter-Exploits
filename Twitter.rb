#!/usr/bin/env ruby
#Begun by blood,by blood undone! - from my new ruby twitter library(in making)
#Author : Pradyumna Dandwate

require 'rubygems'
require 'oauth'

class Twitter
   
  def initialize(client_key, client_secret)
    @api_key = client_key
    @api_secret = client_secret
    
    create_consumer
    get_request_token
  end
  
  def create_consumer
    @consumer = OAuth::Consumer.new @api_key,
                     @api_secret,
                      { :site => 'http://twitter.com/',
                        :request_token_path => '/oauth/request_token',
                        :access_token_path => '/oauth/access_token',
                        :authorize_path => '/oauth/authorize'}
  end
  
  def get_request_token
    @request_token = @consumer.get_request_token
    return @request_token
  end
  
  def get_access_token(pin)
    @access_token = @request_token.get_access_token(:oauth_verifier => pin)
    return @access_token
  end
  
end